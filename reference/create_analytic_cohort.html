<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Select cohort of patients for analysis — create_analytic_cohort • genieBPC</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Select cohort of patients for analysis — create_analytic_cohort"><meta name="description" content="This function allows the user to create a cohort from the GENIE BPC data
based on cancer diagnosis information such as cancer cohort, treating
institution, histology, and stage at diagnosis, as well as cancer-directed
regimen information including regimen name and regimen order. This function
returns each of the clinical and genomic data files subset on the patients
that met criteria for the analytic cohort. Documentation regarding the
structure and contents of each file can be found in the Analytic Data Guide
corresponding to each data release, as well as in the
Clinical Data Structure vignette."><meta property="og:description" content="This function allows the user to create a cohort from the GENIE BPC data
based on cancer diagnosis information such as cancer cohort, treating
institution, histology, and stage at diagnosis, as well as cancer-directed
regimen information including regimen name and regimen order. This function
returns each of the clinical and genomic data files subset on the patients
that met criteria for the analytic cohort. Documentation regarding the
structure and contents of each file can be found in the Analytic Data Guide
corresponding to each data release, as well as in the
Clinical Data Structure vignette."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">genieBPC</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/clinical_data_structure_vignette.html">Tutorial: GENIE BPC Data Structure</a></li>
    <li><a class="dropdown-item" href="../articles/pull_data_synapse_vignette.html">Tutorial: pull_data_synapse</a></li>
    <li><a class="dropdown-item" href="../articles/create_analytic_cohort_vignette.html">Tutorial: create_analytic_cohort</a></li>
    <li><a class="dropdown-item" href="../articles/select_unique_ngs_vignette.html">Tutorial: select_unique_ngs</a></li>
    <li><a class="dropdown-item" href="../articles/drug_regimen_sunburst_vignette.html">Tutorial: drug_regimen_sunburst</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/GENIE-BPC/genieBPC/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Select cohort of patients for analysis</h1>
      <small class="dont-index">Source: <a href="https://github.com/GENIE-BPC/genieBPC/blob/main/R/create_analytic_cohort.R" class="external-link"><code>R/create_analytic_cohort.R</code></a></small>
      <div class="d-none name"><code>create_analytic_cohort.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function allows the user to create a cohort from the GENIE BPC data
based on cancer diagnosis information such as cancer cohort, treating
institution, histology, and stage at diagnosis, as well as cancer-directed
regimen information including regimen name and regimen order. This function
returns each of the clinical and genomic data files subset on the patients
that met criteria for the analytic cohort. Documentation regarding the
structure and contents of each file can be found in the Analytic Data Guide
corresponding to each data release, as well as in the
<a href="https://genie-bpc.github.io/genieBPC/articles/clinical_data_structure_vignette.html">Clinical Data Structure vignette</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">create_analytic_cohort</span><span class="op">(</span></span>
<span>  <span class="va">data_synapse</span>,</span>
<span>  index_ca_seq <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">institution</span>,</span>
<span>  <span class="va">stage_dx</span>,</span>
<span>  <span class="va">histology</span>,</span>
<span>  <span class="va">regimen_drugs</span>,</span>
<span>  regimen_type <span class="op">=</span> <span class="st">"Exact"</span>,</span>
<span>  <span class="va">regimen_order</span>,</span>
<span>  <span class="va">regimen_order_type</span>,</span>
<span>  return_summary <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data-synapse">data_synapse<a class="anchor" aria-label="anchor" href="#arg-data-synapse"></a></dt>
<dd><p>The item from the nested list returned from
pull_data_synapse() that corresponds to the cancer cohort of interest.</p></dd>


<dt id="arg-index-ca-seq">index_ca_seq<a class="anchor" aria-label="anchor" href="#arg-index-ca-seq"></a></dt>
<dd><p>Index cancer sequence. Default is 1, indicating the
patient's first index cancer. The index cancer is also referred to as the
BPC Project cancer in the GENIE BPC Analytic Data Guide; this is the
cancer that met the eligibility criteria for the project and was
selected at random for PRISSMM phenomic data curation.
Specifying multiple index cancer sequences, e.g.
index_ca_seq = c(1, 2) will return index cancers to
patients with 1 index cancer and will return the first AND second index
cancers to patients with multiple.</p></dd>


<dt id="arg-institution">institution<a class="anchor" aria-label="anchor" href="#arg-institution"></a></dt>
<dd><p>GENIE BPC participating institution. See lookup table
`cohort_institution` for a list of institutions participating in curation of
each cancer cohort. Default selection is all institutions. This parameter
corresponds to the variable `institution` in the Analytic Data Guide.</p></dd>


<dt id="arg-stage-dx">stage_dx<a class="anchor" aria-label="anchor" href="#arg-stage-dx"></a></dt>
<dd><p>Stage at diagnosis. Must be one of "Stage I", "Stage II",
"Stage III", "Stage I-III NOS", "Stage IV". The default selection is all
stages.
Note that if this parameter is specified, any cases that are missing stage
information are automatically excluded from the resulting cohort.
This parameter corresponds to the variable `stage_dx` in the
Analytic Data Guide.</p></dd>


<dt id="arg-histology">histology<a class="anchor" aria-label="anchor" href="#arg-histology"></a></dt>
<dd><p>Cancer histology. For all cancer cohorts except for BrCa
(breast cancer), this parameter corresponds to the variable
`ca_hist_adeno_squamous` and must be one of "Adenocarcinoma",
"Squamous cell", "Sarcoma",
"Small cell carcinoma", "Carcinoma", "Other histologies/mixed tumor".
 For BrCa, this parameter corresponds to the variable
`ca_hist_brca` and must be one of
"Invasive lobular carcinoma", "Invasive ductal carcinoma", "Other histology".
The default selection is all histologies. Note that if this parameter is
specified, any cases that are missing histology information are automatically
excluded from the resulting cohort.</p></dd>


<dt id="arg-regimen-drugs">regimen_drugs<a class="anchor" aria-label="anchor" href="#arg-regimen-drugs"></a></dt>
<dd><p>Vector with names of drugs in cancer-directed regimen,
separated by a comma. For example, to specify a regimen consisting of
Carboplatin and Pemetrexed, specify regimen_drugs = "Carboplatin,
Pemetrexed". Acceptable values are found in the `drug_regimen_list`
dataset provided with this package. This parameter
corresponds to the variable `regimen_drugs` in the Analytic Data Guide.</p></dd>


<dt id="arg-regimen-type">regimen_type<a class="anchor" aria-label="anchor" href="#arg-regimen-type"></a></dt>
<dd><p>Indicates whether the regimen(s) specified in
`regimen_drugs` indicates the exact regimen to return, or if regimens
containing the drugs listed in `regimen_drugs` should be returned. Must be
one of "Exact" or "Containing". The default is "Exact".</p></dd>


<dt id="arg-regimen-order">regimen_order<a class="anchor" aria-label="anchor" href="#arg-regimen-order"></a></dt>
<dd><p>Order of cancer-directed regimen. If multiple drugs
are specified, `regimen_order` indicates the regimen order for all drugs;
different values of `regimen_order` cannot be specified for different drug
regimens. If multiple values are specified, e.g. c(1, 2), then drug regimens
that met either order criteria are returned.</p></dd>


<dt id="arg-regimen-order-type">regimen_order_type<a class="anchor" aria-label="anchor" href="#arg-regimen-order-type"></a></dt>
<dd><p>Specifies whether the `regimen_order` parameter
refers to the order of receipt of the drug regimen within the cancer
diagnosis (across all other drug regimens; "within cancer") or the order of
receipt of the drug regimen within the times that that drug regimen was
administered (e.g. the first time carboplatin pemetrexed was received, out
of all times that the patient received carboplatin pemetrexed; "within
regimen"). Acceptable values are "within cancer" and "within regimen".</p></dd>


<dt id="arg-return-summary">return_summary<a class="anchor" aria-label="anchor" href="#arg-return-summary"></a></dt>
<dd><p>Specifies whether a summary table for the cohort is
returned. Default is FALSE. The `gtsummary` package is required to return a
summary table.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list of data frames containing clinical and next generation
sequencing information for patients that met the specified criteria.
Optionally, if return_summary = TRUE, the list also includes summary
tables for the number of records per dataset (`tbl_overall_summary`)
as well as tables of key cancer diagnosis (`tbl_cohort`),
cancer-directed regimen (`tbl_drugs`) and next generation sequencing
(`tbl_ngs`) variables.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>See the <a href="https://genie-bpc.github.io/genieBPC/articles/create_analytic_cohort_vignette.html">create_analytic_cohort vignette</a> for further documentation and examples.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Jessica Lavery</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Examples using package test data</span></span></span>
<span class="r-in"><span><span class="co"># Example 1 ----------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># Create a cohort of all patients with stage IV NSCLC adenocarcinoma and</span></span></span>
<span class="r-in"><span><span class="co"># obtain all of their corresponding clinical and genomic data</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ex1</span> <span class="op">&lt;-</span> <span class="fu">create_analytic_cohort</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data_synapse <span class="op">=</span> <span class="fu">genieBPC</span><span class="fu">::</span><span class="va"><a href="nsclc_test_data.html">nsclc_test_data</a></span>,</span></span>
<span class="r-in"><span>  stage_dx <span class="op">=</span> <span class="st">"Stage IV"</span>,</span></span>
<span class="r-in"><span>  histology <span class="op">=</span> <span class="st">"Adenocarcinoma"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ex1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "cohort_pt_char"            "cohort_ca_dx"             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3] "cohort_ca_dx_non_index"    "cohort_ca_drugs"          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5] "cohort_prissmm_imaging"    "cohort_prissmm_pathology" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "cohort_prissmm_md"         "cohort_ngs"               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "cohort_mutations_extended" "cohort_fusions"           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] "cohort_cna"               </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 2 ----------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># Create a cohort of all NSCLC patients who received Cisplatin,</span></span></span>
<span class="r-in"><span><span class="co"># Pemetrexed Disodium or Cisplatin, Etoposide as their first drug regimen</span></span></span>
<span class="r-in"><span><span class="co"># for their first index NSCLC</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ex2</span> <span class="op">&lt;-</span> <span class="fu">create_analytic_cohort</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data_synapse <span class="op">=</span> <span class="fu">genieBPC</span><span class="fu">::</span><span class="va"><a href="nsclc_test_data.html">nsclc_test_data</a></span>,</span></span>
<span class="r-in"><span>  regimen_drugs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"Cisplatin, Pemetrexed Disodium"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Cisplatin, Etoposide"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  regimen_order <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  regimen_order_type <span class="op">=</span> <span class="st">"within cancer"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 3 ----------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># Create a cohort of all NSCLC patients who received Cisplatin, Pemetrexed</span></span></span>
<span class="r-in"><span><span class="co"># Disodium at any time throughout the course of treatment for their</span></span></span>
<span class="r-in"><span><span class="co"># cancer diagnosis,</span></span></span>
<span class="r-in"><span><span class="co"># but in the event that the patient received the drug multiple times,</span></span></span>
<span class="r-in"><span><span class="co"># only select the first time.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ex3</span> <span class="op">&lt;-</span> <span class="fu">create_analytic_cohort</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data_synapse <span class="op">=</span> <span class="fu">genieBPC</span><span class="fu">::</span><span class="va"><a href="nsclc_test_data.html">nsclc_test_data</a></span>,</span></span>
<span class="r-in"><span>  regimen_drugs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Cisplatin, Pemetrexed Disodium"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  regimen_order <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  regimen_order_type <span class="op">=</span> <span class="st">"within regimen"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 4 ----------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># Using create_analytic_cohort with pull_data_synapse</span></span></span>
<span class="r-in"><span><span class="fu"><a href="set_synapse_credentials.html">set_synapse_credentials</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in curl::curl_fetch_memory(url, handle = handle):</span> Timeout was reached [auth-prod.prod.sagebase.org]:</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> Operation too slow. Less than 1 bytes/sec transferred the last 600 seconds</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">nsclc_2_0</span> <span class="op">&lt;-</span> <span class="fu"><a href="pull_data_synapse.html">pull_data_synapse</a></span><span class="op">(</span><span class="st">"NSCLC"</span>, version <span class="op">=</span> <span class="st">"v2.0-public"</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in .get_synapse_token(pat = pat):</span> No credentials found. Have you authenticated yourself? Use</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> `set_synapse_credentials()` to set credentials for this session, or pass a</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> `pat` (see README:'Data Access &amp; Authentication' for details on</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> authentication).</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ex4</span> <span class="op">&lt;-</span> <span class="fu">create_analytic_cohort</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data_synapse <span class="op">=</span> <span class="va">nsclc_2_0</span><span class="op">$</span><span class="va">NSCLC_v2.0</span>,</span></span>
<span class="r-in"><span>  regimen_drugs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Cisplatin, Pemetrexed Disodium"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  regimen_order <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  regimen_order_type <span class="op">=</span> <span class="st">"within regimen"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'nsclc_2_0' not found</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jessica A. Lavery, Michael A. Curry, Samantha Brown, Karissa Whiting, Hannah Fuchs, Axel Martin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

